[gd_scene load_steps=18 format=3 uid="uid://cpdwlpungncrj"]

[ext_resource type="PackedScene" uid="uid://bbal7dy0fqtxa" path="res://objects/player.tscn" id="1_att4b"]
[ext_resource type="Script" uid="uid://bgfqe788rpbmc" path="res://world.gd" id="1_gbfbk"]
[ext_resource type="AudioStream" uid="uid://ddaagl0v2elef" path="res://sounds/motorcycle.wav" id="2_ioo17"]
[ext_resource type="AudioStream" uid="uid://bh88qlso7ydh2" path="res://sounds/car-break.mp3" id="3_ioo17"]
[ext_resource type="PackedScene" uid="uid://b5ok4uv7svrlx" path="res://objects/npc.tscn" id="3_nd55t"]
[ext_resource type="PackedScene" uid="uid://brx3au423cy5e" path="res://objects/trash.tscn" id="5_036b0"]
[ext_resource type="PackedScene" uid="uid://ben7md06nc8go" path="res://objects/trash_can.tscn" id="6_dwbse"]
[ext_resource type="PackedScene" uid="uid://bn4d32i3cw2bl" path="res://models/map/Map.tscn" id="7_pkg7o"]
[ext_resource type="PackedScene" uid="uid://ew7egx46djq4" path="res://objects/broom.tscn" id="8_gbfbk"]
[ext_resource type="Script" uid="uid://7fsango0bi0s" path="res://enemy_scene_controller.gd" id="10_ic0uy"]
[ext_resource type="PackedScene" uid="uid://34jnt07u13hh" path="res://objects/enemy.tscn" id="11_k3n1d"]
[ext_resource type="PackedScene" uid="uid://vcaxvh4lrrga" path="res://objects/wallet.tscn" id="9_wse8f"]

[sub_resource type="Animation" id="Animation_gbfbk"]
resource_name = "start"
length = 10.0
tracks/0/type = "audio"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("motorcycle_sound/motorcycle")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"clips": [{
"end_offset": 0.0,
"start_offset": 0.0,
"stream": ExtResource("2_ioo17")
}],
"times": PackedFloat32Array(1)
}
tracks/0/use_blend = true
tracks/1/type = "method"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath(".")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(7),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"start"
}]
}
tracks/2/type = "audio"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("motorcycle_sound/AudioStreamPlayer3D")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"clips": [{
"end_offset": 0.0,
"start_offset": 0.0,
"stream": ExtResource("3_ioo17")
}],
"times": PackedFloat32Array(3.4666667)
}
tracks/2/use_blend = true

[sub_resource type="AnimationLibrary" id="AnimationLibrary_ioo17"]
_data = {
&"start": SubResource("Animation_gbfbk")
}

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_6pp2b"]
sky_top_color = Color(0.172833, 0.172833, 0.172833, 1)
sky_horizon_color = Color(0.268107, 0.191103, 0.282948, 1)
ground_bottom_color = Color(0, 0, 0, 1)
ground_horizon_color = Color(0.162212, 0.029023, 0.246596, 1)
sun_angle_max = 19.51
energy_multiplier = 0.5

[sub_resource type="Sky" id="Sky_tam5d"]
sky_material = SubResource("ProceduralSkyMaterial_6pp2b")
process_mode = 1

[sub_resource type="Environment" id="Environment_wlcwn"]
background_mode = 2
background_energy_multiplier = 0.5
sky = SubResource("Sky_tam5d")
reflected_light_source = 2
ssao_radius = 4.96
ssao_intensity = 5.14
ssao_detail = 1.36
ssao_horizon = 0.51
ssao_sharpness = 0.37
ssao_light_affect = 0.2
fog_enabled = true
fog_light_energy = 0.59
fog_sun_scatter = 0.07
fog_density = 0.0259
fog_aerial_perspective = 0.17

[sub_resource type="NavigationMesh" id="NavigationMesh_ic0uy"]
vertices = PackedVector3Array(-16.3736, 0.4182353, -0.033999443, -16.6236, 0.4182353, 0.46600056, -15.6236, 0.4182353, 0.71600056, -15.6236, 0.4182353, -0.28399944, -12.3736, 0.4182353, 0.71600056, -12.3736, 0.4182353, -0.28399944, -13.1236, 0.4182353, -6.7839994, -14.3736, 0.4182353, -6.5339994, -11.6236, 0.4182353, 0.46600056, -11.6236, 0.4182353, -0.033999443, -14.6236, 0.4182353, -11.533999, -17.8736, 0.4182353, -11.533999, -17.1236, 0.4182353, -9.283999, -15.6236, 0.4182353, -8.033999, -14.8736, -1.8317647, 19.966, -14.8736, -1.8317647, 20.716, -13.3736, -1.8317647, 20.716, -13.3736, -1.8317647, 19.966, -12.3736, 0.4182353, -8.033999, -13.1236, 0.4182353, -11.533999, -10.8736, 0.4182353, -8.283999, -10.8736, 0.4182353, -9.033999, -16.8736, 0.4182353, -8.283999, -15.6236, -1.8317647, 19.716, -12.3736, -1.8317647, 19.716, -15.6236, 0.4182353, 10.946771, -15.6236, -1.0817647, 16.792923, -15.6236, -1.8317647, 18.254463, -12.3736, -1.8317647, 18.254463, -12.3736, -1.0817647, 16.792923, -12.3736, 0.4182353, 10.946771, -17.8736, 0.4182353, -9.283999, -9.8736, 0.4182353, -9.283999, -9.8736, 0.4182353, -11.533999, -10.8736, 0.4182353, -0.28399944, -5.8736, 0.4182353, 0.96600056, -8.3736, 0.4182353, -9.533999, -8.3736, 0.4182353, -6.7839994, 11.8764, 0.9182353, -9.533999, 7.537113, 0.4182353, -9.533999, 9.340687, 0.4182353, -8.033999, -10.8736, 0.4182353, -6.5339994, -5.8736, 0.4182353, 12.216001, 11.8764, 0.4182353, 19.716, 11.8764, 0.4182353, -5.146499, -10.8736, 0.4182353, 12.466001, -10.8736, 0.4182353, 19.716, -17.1236, 0.4182353, -0.28399944, -21.8736, 0.4182353, 0.46600056, -17.1236, 0.4182353, -6.5339994, -21.8736, 0.4182353, -6.5339994, -8.6236, 0.9182353, 10.966001, -9.3736, 0.9182353, 11.466001, -6.8736, 0.9182353, 11.466001, -6.8736, 0.9182353, 1.7160006, -9.6236, 0.9182353, 1.7160006, -8.6236, 0.9182353, 2.2160006, -8.8736, 0.9182353, 9.466001, -6.8736, 0.9182353, 8.216001, -8.6236, 0.9182353, 7.9660006, -10.8736, 0.9182353, 3.9660006, -10.8736, 0.9182353, 9.216001, -9.3736, 0.9182353, 8.966001, -8.6236, 0.9182353, 5.2160006, -9.3736, 0.9182353, 4.2160006, -8.8736, 0.9182353, 3.7160006, -6.8736, 0.9182353, 4.9660006, -15.1236, -1.8317647, 21.466, -16.1236, -1.8317647, 27.716, -13.1236, -1.8317647, 21.466, 12.3764, -1.8317647, 27.716, 12.3764, -1.8317647, 21.466, -16.1236, -1.8317647, 21.466)
polygons = [PackedInt32Array(0, 3, 1), PackedInt32Array(1, 3, 2), PackedInt32Array(2, 3, 4), PackedInt32Array(4, 3, 5), PackedInt32Array(5, 3, 7), PackedInt32Array(5, 7, 6), PackedInt32Array(8, 4, 9), PackedInt32Array(9, 4, 5), PackedInt32Array(12, 11, 13), PackedInt32Array(13, 11, 10), PackedInt32Array(17, 16, 14), PackedInt32Array(14, 16, 15), PackedInt32Array(19, 18, 6), PackedInt32Array(6, 18, 5), PackedInt32Array(21, 20, 18), PackedInt32Array(13, 22, 12), PackedInt32Array(23, 27, 14), PackedInt32Array(14, 27, 17), PackedInt32Array(17, 27, 24), PackedInt32Array(24, 27, 28), PackedInt32Array(28, 27, 26), PackedInt32Array(28, 26, 29), PackedInt32Array(29, 26, 25), PackedInt32Array(29, 25, 30), PackedInt32Array(30, 25, 2), PackedInt32Array(30, 2, 4), PackedInt32Array(12, 31, 11), PackedInt32Array(33, 32, 21), PackedInt32Array(10, 7, 13), PackedInt32Array(13, 7, 3), PackedInt32Array(18, 19, 21), PackedInt32Array(21, 19, 33), PackedInt32Array(9, 34, 8), PackedInt32Array(8, 34, 35), PackedInt32Array(38, 40, 39), PackedInt32Array(39, 40, 36), PackedInt32Array(36, 40, 37), PackedInt32Array(37, 40, 35), PackedInt32Array(41, 37, 34), PackedInt32Array(34, 37, 35), PackedInt32Array(38, 44, 40), PackedInt32Array(40, 44, 35), PackedInt32Array(35, 44, 42), PackedInt32Array(42, 44, 43), PackedInt32Array(45, 42, 46), PackedInt32Array(46, 42, 43), PackedInt32Array(0, 1, 47), PackedInt32Array(47, 1, 48), PackedInt32Array(49, 47, 50), PackedInt32Array(50, 47, 48), PackedInt32Array(53, 52, 51), PackedInt32Array(54, 56, 55), PackedInt32Array(59, 58, 57), PackedInt32Array(57, 58, 51), PackedInt32Array(51, 58, 53), PackedInt32Array(64, 63, 60), PackedInt32Array(60, 63, 59), PackedInt32Array(60, 59, 62), PackedInt32Array(60, 62, 61), PackedInt32Array(63, 65, 66), PackedInt32Array(66, 65, 56), PackedInt32Array(66, 56, 54), PackedInt32Array(59, 57, 62), PackedInt32Array(64, 65, 63), PackedInt32Array(16, 69, 15), PackedInt32Array(15, 69, 67), PackedInt32Array(67, 69, 68), PackedInt32Array(71, 70, 69), PackedInt32Array(69, 70, 68), PackedInt32Array(68, 72, 67)]

[node name="World" type="Node3D"]
script = ExtResource("1_gbfbk")

[node name="CutsceneHandler" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_ioo17")
}

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_wlcwn")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.625964, 0.779852, 0, -0.779852, 0.625964, 0, 4, 4.42572)
light_energy = 0.471
light_volumetric_fog_energy = 4.702
light_angular_distance = 5.21

[node name="player" parent="." instance=ExtResource("1_att4b")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -11.56832, -1.3289495, 25.080757)

[node name="pickables" type="Node3D" parent="."]

[node name="Broom" parent="pickables" instance=ExtResource("8_gbfbk")]
transform = Transform3D(1, 0, 0, 0, 0.9845032, 0.17536671, 0, -0.17536671, 0.9845032, -17.002363, 1.0069427, -2.3125112)

[node name="Trash" type="Node3D" parent="pickables"]

[node name="Trash" parent="pickables/Trash" instance=ExtResource("5_036b0")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6.460966, -1.8624164, 22.53355)

[node name="Trash2" parent="pickables/Trash" instance=ExtResource("5_036b0")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6.7780967, -2.2644272, 23.368)

[node name="Trash3" parent="pickables/Trash" instance=ExtResource("5_036b0")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -7.760269, -2.2644272, 23.817652)

[node name="Trash4" parent="pickables/Trash" instance=ExtResource("5_036b0")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6.2318, -2.264427, 24.33339)

[node name="Trash5" parent="pickables/Trash" instance=ExtResource("5_036b0")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5.0856743, -2.264427, 22.94106)

[node name="interactables" type="Node3D" parent="."]

[node name="TrashCan" parent="interactables" instance=ExtResource("6_dwbse")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -8.070517, -2.1630337, 21.635715)

[node name="Wallet" parent="interactables" instance=ExtResource("9_wse8f")]

[node name="npcs" type="Node3D" parent="."]

[node name="tutorial_npc" parent="npcs" instance=ExtResource("3_nd55t")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -11.58218, -1.4028245, 22.476143)
collision_layer = 1
collision_mask = 1
npc_id = "tutorial"
npc_name = "Caio"
can_interact = false

[node name="npc01" parent="npcs" instance=ExtResource("3_nd55t")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.3783245, 0.86926126, 7.0530043)
npc_id = "npc1"
npc_name = "Calvin"
quest = 2

[node name="npc??" parent="npcs" instance=ExtResource("3_nd55t")]
npc_id = "default"
quest = 0
can_interact = true
item_name = ""
item_dialogue_id = ""

[node name="motorcycle_sound" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.52030516, -1.6971968, 22.557419)

[node name="motorcycle" type="AudioStreamPlayer3D" parent="motorcycle_sound"]

[node name="AudioStreamPlayer3D" type="AudioStreamPlayer3D" parent="motorcycle_sound"]

[node name="npc_dest" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 11.973197, 0.6400074, -9.73647)

[node name="EnemySceneController" type="Node" parent="."]
script = ExtResource("10_ic0uy")

[node name="Enemy" parent="EnemySceneController" groups=["enemy"] instance=ExtResource("11_k3n1d")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 11.573612, 1.5246725, -10.935783)

[node name="SoundPlayer" type="AudioStreamPlayer3D" parent="EnemySceneController/Enemy"]

[node name="InitialEnemyPosition" type="Node3D" parent="EnemySceneController"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 11.277801, 1.5652705, -9.448406)

[node name="Knocking" type="AudioStreamPlayer3D" parent="EnemySceneController"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 10.826924, 2.1065857, -9.859498)
volume_db = 10.98

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_ic0uy")

[node name="Map" parent="NavigationRegion3D" instance=ExtResource("7_pkg7o")]
